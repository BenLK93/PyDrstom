# Reference main.py
#: import main main
#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton
#: import Factory kivy.factory.Factory
DelovneUre:

<PrikazListButton@ListItemButton>
	text_size: self.size
	halign: 'left'
	selected_color: (0.7, 0, 0, 0.8)
	deselected_color: (0, 0.3, 0.6, 0.8)

<UpdatePopup@Popup>
	auto_dismiss: False
	size_hint: (0.7, 0.3)
	title: 'Popravi vnos'
	spacing: 10
	padding: 10
	
	BoxLayout:
		orientation: 'vertical'
		BoxLayout:
			orientation: 'horizontal'
			Spinner:
				text: 'From p'

			TextInput:
				text: 'from p'

			TextInput:
				text: 'from p'

			TextInput:
				text: 'from p'

			Button:
				text: 'Popravi vnos'

		BoxLayout:

			Button:
				text: 'Close'
				on_release: root.dismiss()
		


<DelovneUre>:
	#Vnos
	ime_iz_vnosa: ime_vnos
	datum_iz_vnosa: datum_vnos
	prihod_iz_vnosa: prihod_vnos
	odhod_iz_vnosa: odhod_vnos
	#vnos out
	vnos_msg: vnos_out
	#Iskanje
	ime_iskanje: ime_i
	datumod_iskanje: datum_od
	datumdo_iskanje: datum_do
	# datumvod_iskanje: datum_vod
	# datumvdo_iskanje: datum_vdo
	#Prikaz podatkov
	dbprikaz: prikaz
	

	orientation: 'vertical'
	#Main wrapper
	BoxLayout:
		orientation: 'vertical'
		
		canvas:
			Color:
				rgba: (0.8, 0.95, 1, 0.8)
			Rectangle:
				pos: self.pos
				size: self.size

		# meni
		BoxLayout:
			size_hint_y: None
			height: 30
			

			canvas:
				Color:
					rgba: (1, 1, 1, 0.9)
				Rectangle:
					pos: self.pos
					size: self.size
			Button:
				text: 'Datoteke'
				size_hint_x: 2
				width: 30
			Button:
				text: 'Porocila'
				size_hint_x: 2
				width: 30
			Button:
				text: 'Nastavitve'
				size_hint_x: 2
				width: 30
			Label:
				text: ''
				size_hint_x: 6
				width: 30
		#meni konec
		
		#zgornji del
		BoxLayout:
			orientation: 'horizontal'
			spacing: 10
			padding: 10
			size_hint_y: 2
			#VNos in iskanje
			BoxLayout:
				orientation: 'vertical'
				spacing: 10
				
				#Vnos
				BoxLayout:
					orientation: 'vertical'
				    size_hint_y: 1.2
				    canvas:
						Color:
							rgba: (0.3, 0.5, 1, 1)
						Rectangle:
							pos: self.pos
							size: self.size
					BoxLayout:
						orientation: 'horizontal'
						size_hint_y: None
						height: 40
						spacing: 10
						padding: 7
						
						Spinner:
							id: ime_vnos
							text: 'Ime'
							values: ["Tatjana", "Maja", "Tomaz", "Edin", "Kristina", "Ana"]
							size_hint_x: 1
						Label:
							text: 'Datum:'

						TextInput:
							id: datum_vnos
							text: 'YYYY-MM-DD'
							size_hint_x: 1.5
						
						Label:
							text: 'Prihod:'
						TextInput:
							id: prihod_vnos
							text: 'HH:MM'
							size_hint_x: 1
						Label:
							text: 'Odhod:'
						TextInput:
							id: odhod_vnos
							text: 'HH:MM'
							size_hint_x: 1

						Button:
							text: 'Vnos ur'
							size_hint_x: 1
							on_press: root.vnos_v_db()

				#vnos konec
				#Iskanje 		
				
				#iskanje vnos
				BoxLayout:
					orientation: 'horizontal'
					size_hint_y: 1
					canvas:
						Color:
							rgba: (0.1, 0.1, 0.1, 0.7)
						Rectangle:
							pos: self.pos
							size: self.size
					Label:
						text: ''
						id: vnos_out
				BoxLayout:
					orientation: 'horizontal'
					spacing: 10
					padding: 10
					size_hint_y: 1.1
					canvas:
						Color:
							rgba: (0.2, 0.5, 1, 1)
						Rectangle:
							pos: self.pos
							size: self.size
					Label:
						text: 'Izberite ime:'
						size_hint_x: 1
						
					Spinner:
						id: ime_i
						text: 'Ime'
						values: ["Tatjana", "Maja", "Tomaz", "Edin", "Kristina"]
						size_hint_x: 1
						
					Label:
						text: 'Datum: '
						size_hint_x: 1
						
					TextInput:
						id: datum_od
						text: '2017-01-01'
						size_hint_x: 1
						
					Label:
						text: '/'
						size_hint_x: 0.5
						
					TextInput:
						id: datum_do
						text: '2018-12-30'
						size_hint_x: 1
						
					Button:
						text: 'Iskanje'
						size_hint_x: 1
						
						on_press: root.iskanje()
						
					

						# BoxLayout:
						# 	orientation: 'horizontal'

						# 	Label:
						# 		text: 'Datum vnosa: '
						# 		size_hint_x: 1
						# 	TextInput:
						# 		id: datum_vod
						# 		text: 'datum'
						# 		size_hint_x: 2
						# 	Label:
						# 		text: '/'
						# 		size_hint_x: 0.5
						# 	TextInput:
						# 		id: datum_vdo
						# 		text: 'datum'
						# 		size_hint_x: 2


						
					#iskanje vnos konec
				#Iskanje konec	
		#zgornji del konec
			
		#spodnji del
		BoxLayout:
			padding: 10
			orientation: 'vertical'
			size_hint_y: 8
			canvas:
				Color:
					rgba: (0.1, 0.1,0.1, 0.7)
				Rectangle:
					pos: self.pos
					size: self.size

			Label:
				size_hint_y: 0.3
				text: 'Rezultati'
			ListView:
				id: prikaz
				size_hint_y: 9
				adapter:
					ListAdapter(data=['''         '''], cls=main.PrikazListButton)

			BoxLayout:
				orientation: 'horizontal'
				size_hint_y: 0.4
				Button:
					text: 'Izbrisi izbrano'
					size_hint_y: 1
					on_press: root.delete_item()
				Button:
					text: ''
					size_hint_y: 1
					on_release: Factory.UpdatePopup().open()
				
				Button:
					text: ''
					size_hint_y: 1 
				Button:
					text: 'Reset'
					size_hint_y: 1 
					on_press: root.clear_list()
